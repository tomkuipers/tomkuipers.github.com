/* https://github.com/manuelbieh/Geolocation-API-Polyfill */
;(function(){var geolocation={};geolocation.init=function(){try{if(typeof(navigator.geolocation)!='undefined'){geolocation.api=navigator.geolocation}else if(typeof(window.google)!='undefined'&&typeof(window.google.gears)!='undefined'){geolocation.api=google.gears.factory.create('beta.geolocation')}else if(typeof(window.blackberry)!='undefined'&&blackberry.location.GPSSupported){geolocation.api=new BlackberryLocation()}else{return false}window.navigator.geolocation=geolocation.api;return true}catch(e){if(typeof(console)!="undefined"){console.log(e)}}}geolocation.getCurrentPosition=function(successCallback,errorCallback,options){if(geolocation.api){geolocation.api.getCurrentPosition(successCallback,errorCallback,options)}}geolocation.watchPosition=function(successCallback,errorCallback,options){if(geolocation.api){geolocation.watchID=geolocation.api.watchPosition(successCallback,errorCallback,options)}return geolocation.watchID}geolocation.clearWatch=function(watchID){if(watchID==NULL){geolocation.api.clearWatch(geolocation.watchID)}else{geolocation.api.clearWatch(watchID)}}geolocation.init()})();function BlackberryLocation(){bb=this;console.log(this);return;this.getCurrentPosition=function(successCallback,errorCallback,options){blackberry.location.setAidMode(2);if(blackberry.location.latitude==0&&blackberry.location.longitude==0){errorCallback.call()}else{blackberry.location.refreshLocation();ts=(parseFloat(navigator.appVersion)>=4.6)?new Date(blackberry.location.timestamp):0;successCallback.call(this,{timestamp:ts,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}}this.watchPosition=function(successCallback,errorCallback,options){interval=(typeof options.maximumAge!='undefined')?options.maximumAge:5000;watchID=window.setInterval(bb.getCurrentPosition,interval,successCallback,errorCallback,options);return watchID}this.clearWatch=function(watchID){window.clearInterval(watchID)}}

